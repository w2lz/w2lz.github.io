# 21 | 为什么我只改一行的语句，锁这么多？


{{&lt; admonition quote &#34;摘要&#34; true &gt;}}
本文深入探讨了 MySQL 加锁规则，通过详细解释加锁规则的原则、优化和 bug，以及介绍了间隙锁和 next-key lock 的概念。通过案例分析，读者可以了解 MySQL 在不同情况下的加锁方式，以及加锁规则对并发操作的影响。
{{&lt; /admonition &gt;}}

&lt;!--more--&gt;

## 案例一：等值查询间隙锁

## 案例二：非唯一索引等值锁

## 案例三：主键索引范围锁

## 案例四：非唯一索引范围锁

## 案例五：唯一索引范围锁 bug

## 案例六：非唯一索引上存在&#34;等值&#34;的例子

## 案例七：limit 语句加锁

## 案例八：一个死锁的例子

## 小结

## 问题


---

> 作者: [w2lz](https://github.com/w2lz)  
> URL: https://blog.yingnan.wang/posts/21.%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E5%8F%AA%E6%94%B9%E4%B8%80%E8%A1%8C%E7%9A%84%E8%AF%AD%E5%8F%A5%E9%94%81%E8%BF%99%E4%B9%88%E5%A4%9A/  

